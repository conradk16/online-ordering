<!DOCTYPE html>
<html>
<head>
<meta name="viewport" content="width=device-width, initial-scale=1">

<!--javascript-->
<script>
    
function alertme() {
  alert("I am an alert box!");
}

function popup(item) {
    var popup = document.getElementById("popup");
    popup.style.display = "block";
    document.body.style.overflow = "hidden";

    // set header
    var header_name = document.getElementsByClassName("popup-header-name")[0];
    header_name.textContent = item.item_name;

    // set body
    var popup_body = document.getElementsByClassName("popup-body")[0];
    popup_body.scrollTop = 0;
    if (item.item_description != "") {
        var description = document.getElementsByClassName("popup-description")[0];
        description.innerHTML = item.item_description;
    }

    var quantity = document.getElementsByClassName("quantity")[0];
    
}

function close_popup_if_open(event) {
    var popup = document.getElementById("popup");
    if (event.target == popup) {
        close_popup();
    }
}

function close_popup() {
    var popup = document.getElementById("popup");
    popup.style.display = "none";
    document.body.style.overflow = "auto";
}

function load_menu() {
    var food_items = document.getElementsByClassName("food-items")[0];

    for (var menu_group of menu_groups) {

        // add the header
        var new_header = document.createElement('h2');
        new_header.innerHTML = menu_group.group_name;
        new_header.classList.add("group-header");
        food_items.appendChild(new_header);
            
        var group_box = document.createElement('div');
        group_box.classList.add("group-box");
        food_items.appendChild(group_box);
            
        var group_list_left = document.createElement('ul');
        group_list_left.classList.add("group-list-left");
        group_box.appendChild(group_list_left);

        var group_list_right = document.createElement('ul');
        group_list_right.classList.add("group-list-right");
        group_box.appendChild(group_list_right);

        // add items to left stack

        for (const item of menu_group.items) {
            var list_item = document.createElement('li');
            list_item.classList.add("list-item");
            group_list_left.appendChild(list_item);
            
            var link = document.createElement('a');
            link.classList.add("link");
            link.onclick = function() { popup(item); };
            list_item.appendChild(link);

            var inside_box = document.createElement('div');
            inside_box.classList.add("inside-box");
            link.appendChild(inside_box);

            var top_row = document.createElement('div');
            top_row.classList.add("top-row");
            inside_box.appendChild(top_row);
    
            var title = document.createElement('span');
            title.classList.add("title");
            title.innerHTML = item.item_name;
            top_row.appendChild(title);
            
            var price = document.createElement('span');
            price.classList.add("price");
            price.innerHTML = item.price;
            top_row.appendChild(price);
            
            var description = document.createElement('p');
            description.classList.add("description");
            description.innerHTML = item.item_description;
            inside_box.appendChild(description);

        }

        // move items back to right stack

        while (true) {
            // move bottom left to top right
            left_children = group_list_left.children;
            moving_elem = left_children[left_children.length - 1];
            group_list_left.removeChild(moving_elem);
            group_list_right.prepend(moving_elem);
            
            // check if need to move it back
            if (group_list_left.clientHeight < group_list_right.clientHeight) {
                group_list_right.removeChild(moving_elem);
                group_list_left.append(moving_elem);
                break;
            }
        }

    }
}

function set_onclicks() {
    var popup_x = document.getElementsByClassName("close")[0];
    popup_x.onclick = close_popup;

    window.onclick = close_popup_if_open;
}

function run_on_load() {
    set_onclicks();
    load_menu();
}

class menuGroup {
    constructor(group_name, items) {
        this.group_name = group_name;
        this.items = items;
    }
}

class menuItem {
    constructor(item_name, item_description, price, choice_sets) {
        this.item_name = item_name;
        this.item_description = item_description;
        this.price = price;
        this.choice_sets = choice_sets;
    }
}

class choiceSet {
    constructor(title, choices, is_optional) {
        this.title = title;
        this.choices = choices;
        this.is_optional = is_optional;
    }
}

// null price means no additional cost
class choice {
    constructor(name, price) {
        this.name = name;
        this.price = price;
    }
}

var menu_groups = [];

// first group
var items = [];
items.push(new menuItem("#1 Chorizo Burrito", "Mexican sausage, scrambled eggs, cheese, and potatoes.", 7.99, []));

items.push(new menuItem("#2 Protein Burrito", "Beef, scrambled eggs, cheese, and potatoes.", 7.99, []));

items.push(new menuItem("#3 Sausage Burrito", "Sausage scrambled eggs, cheese, and potatoes.", 10.99, []));

items.push(new menuItem("#4 Ham Burrito", "Ham, scrambled eggs, cheese, and potatoes.", 7.99, []));

items.push(new menuItem("#5 Veggie Burrito", "Grilled onions, bell peppers, zucchini, mushrooms, scrambled eggs, cheese, potatoes, and home style salsa.", 7.99, []));

items.push(new menuItem("#6 Carnitas Burrito", "Pork meat, scrambled eggs, cheese, and potatoes.", 7.99, []));

items.push(new menuItem("#7 Pastor Burrito", "Marinated pork meat, scrambled eggs, cheese, and potatoes.", 7.99, []));

items.push(new menuItem("#14 Breakfast Plate", "Choice of meat, eggs, cheese, rice, beans, and tortillas.", 7.99, 
        [
        new choiceSet(
            "Meat", 
            [
            new choice("Chicken", null), 
            new choice("Beef", null), 
            new choice("Pork", null)
            ]
        ),
        new choiceSet(
            "Egg Style",
            [
            new choice("Scrambled", null),
            new choice("Over Easy", null),
            new choice("Over Medium", null),
            new choice("Over Hard", null),
            new choice("Sunny-Side Up", null)
            ]
        )
        ]
    ));

items.push(new menuItem("#15 Chile Relleno Burrito", "Pico de gallo, scrambled eggs, cheese, and potatoes.", 7.99, []));

menu_groups.push(new menuGroup("Breakfast", items));

// second group
var items = [];
items.push(new menuItem("Shrimp Burrito", "Grilled vegetables, rice, beans, cheese, and pico de gallo.", 11.94, 
        []));

items.push(new menuItem("Combo Burrito", "Cheese, sour cream, onion, and cilantro.", 10.99, []));

menu_groups.push(new menuGroup("Burritos", items));

window.onload = run_on_load;

</script>


<style>
body {
    margin: 0;
    font-family: Calibre,Helvetica,Lucida grande,sans-serif;
}

* {
    box-sizing: border-box;
}


/*css code*/
.topnav {
  height: 60px;
  width: 100%;
  background-color: white;
  box-shadow: 0 2px 4px 0 rgba(0,0,0,.2);
  position: sticky;
  display: flex;
  justify-content: space-between;
  align-items: center;
  padding: 0 32px 0 12px;
  top: 0px;
  z-index: 1;
}

.topnav a {
  float: left;
  color: #2e7c87;
  text-align: center;
  padding-top: 15px;
  padding-bottom: 10px;
  margin-left: 15px;
  margin-right: 15px;
  text-decoration: none;
  font-size: 14px;
}

.splitview {
    display: grid;
    position: relative;
    grid-template-areas: "food-items cart";
    grid-template-columns: 1fr 375px;
}

.cart {
    grid-area: cart;
}

.cart-fixed {
    padding: 0 20px;
    box-shadow: 0 2px 4px 0 rgba(0,0,0,.2);
    top:60px;
    position: sticky;
    display:flex;
    flex-direction: column;
    height: calc(100vh - 60px);
}

.cart-table {
    height:40px;
    overflow-y: auto;
}

.food-items {
    grid-area: food-items;
    max-width: 800px;
    margin: 0 auto;
    padding: 0 20px;
    width: 100%;
}

.group-header {
    font-size: 20px;
    font-weight: 700;
    line-height: 1.4;
    letter-spacing: 0.3px;
    color: rgba(0,0,0,0.87);
    margin: 18px 0 8px;
}

.group-box {
    padding:0;
    overflow:hidden;
}

.group-list-left, .group-list-right {
    float: left;
    width: 50%;
    list-style-type: none;
    margin: 0;
    padding: 0;
}

.group-list-left {
    padding-right: 6px;
}

.group-list-right {
    padding-left: 6px;
}


.list-item {
    border-radius: 4px;
    border: 1px solid rgba(0,0,0,0.12);
    margin-bottom: 12px;
    overflow: hidden;
    width: 100%;
}

.list-item:hover{
    border: 1px solid #227599;
}

.link {
    height: 100%;
    text-decoration: none;
    cursor: pointer;
}

.inside-box {
    padding: 5px;
    height: 100%;
}

.top-row {
    display: flex;
    justify-content: space-between;
    height: 25px;
}

.title {
    color: #227599;
    font-size: 18px;
}

.price {
    color: #227599;
    font-size: 18px;
}

.description {
    font-size: 14px;
    color: black;
    margin: 5px 0px;
}

/* The Popup */
.popup {
    display: none; /* Hidden by default */
    position: fixed; /* Stay in place */
    z-index: 2;
    padding: 30px; /* Location of the box */
    left: 0;
    top: 0;
    width: 100%; /* Full width */
    height: 100%; /* Full height */
    overflow: auto; /* Enable scroll if needed */
    background-color: rgb(0,0,0); /* Fallback color */
    background-color: rgba(0,0,0,0.4); /* Black w/ opacity */
}

/* Popup content */
.popup-content {
    display: flex;
    flex-direction: column;
    max-height: 100%;
    background-color: #fefefe;
    margin: auto;
    border: 1px solid #888;
    width: 460px;
    border-radius: 4px;
    border: 0;
}

.popup-header {
    padding: 5px 15px;
}

.popup-header-name {
    font-size: 20px;
    font-weight: 700;
    line-height: 1.4;
    letter-spacing: 0.3px;
    color: rgba(0,0,0,0.87);
    margin: 8px 0 8px;
}

.popup-body {
    overflow-y: auto;
    padding-left: 10px;
    padding-right: 10px;
    padding-bottom: 10px;
}

.popup-description {
    margin-top: 0px;
    martin-bottom: 8px;
}

.quantity {
    display: flex;
    justify-content: space-between;
    padding: 8px;
    background: #f2f2f2;
    align-items: center;
    border-radius: 4px;
    border: 0;
}

.plus-minus-bar {
    float: left;
    display: flex;
    justify-content: space-between;
    align-items: center;
}

.plus-minus-symbol:hover {
    background: #46bfcf;
}

.quantity-word {
    padding: 0px 10px;
    font-size: 16px;
    font-weight: 700;
}

.quantity-count {
    font-size: 16px;
    font-weight: 700;
}

.popup-footer {
    
}

.popup-button {
    display: flex;
    justify-content: center;
    align-items: center;
    font-size: 18px;
    line-height: 1.11;
    letter-spacing: .3px;
    height: 48px;
    width: 100%;
    color: #fff;
    background-color: #2e7c87;
    border: none;
    cursor: pointer;
    border-radius: 4px;
    border: 0;

}

/* The Close Button */
.close {
  color: #aaaaaa;
  float: right;
  font-size: 28px;
  font-weight: bold;
}

.close:hover,
.close:focus {
  color: #000;
  text-decoration: none;
  cursor: pointer;
}

</style>
</head>



<body>

<div class="topnav">
  <a href="#menu">
    <img src="../static/menu.svg" alt="" width=20 height=20>
  </a>
  <img src="../static/logo.png" alt="" width=75 height=45>
  <p></p>
</div>

<div class="splitview">
    <div class="food-items">
    </div>
    <div class="cart">
        <div class="cart-fixed">
            <h2>Your Order</h2>
            <div class=cart-table>
                <p>blahblah</p>
                <p>blah</p>
            </div>
        </div>
    </div>
</div>

<!-- Popup -->
<div id="popup" class="popup">

    <!-- Popup content -->
    <div class="popup-content">
        <!-- Popup header -->
        <div class="popup-header">
            <span class="close">&times;</span>
            <h2 class="popup-header-name">Default Item</h2>
        </div>
        <!-- Popup body -->
        <div class="popup-body">
            <p class=popup-description></p>
            <div class=quantity>
                <div class="plus-minus-bar">
                    <img src="../static/minus.png" class="plus-minus-symbol" width=30 height=30>
                    <a class="quantity-word">Quantity</a>
                    <img src="../static/plus.png" class="plus-minus-symbol" width=30 height=30>
                </div>
                <a class="quantity-count">1</a>
            </div>
        </div>
        <!-- Popup footer -->
        <div class="popup-footer">
            <button class="popup-button">Add To Cart</button>
        </div>
    </div>

</div>

</body>
</html>
